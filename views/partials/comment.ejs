<% comments.forEach(comment=> { %>
    <div class="comment <%= setParentComment ? 'parentComment' : '' %>" id="<%= comment._id %>" login="<%= comment.user.login %>">
        <div class="comment-wrapper">
            <a href="/channel/<%= comment.user.login %>" class="avatar-link">
                <svg width="34px" height="34px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="6" r="4" stroke="#000000" stroke-width="1.5" />
                    <path opacity="0.5"
                        d="M20 17.5C20 19.9853 20 22 12 22C4 22 4 19.9853 4 17.5C4 15.0147 7.58172 13 12 13C16.4183 13 20 15.0147 20 17.5Z"
                        stroke="#000000" stroke-width="1.5" />
                </svg>
            </a>
            <div class="comment-data">
                <div class="comment-top">
                    <a href="/channel/<%= comment.user.login %>">
                        <div class="commenter-name">
                            <%= comment.user.login %>
                        </div>
                    </a>
                    <div class="comment-date">
                        <%= timeAgo(comment.createdAt) %>
                    </div>
                    <div class="dropdown edit-comment-dropdown">
                        <button class="edit-comment-btn">
                            <svg width="16px" height="16px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.15 28.012v-0.85c0.019-0.069 0.050-0.131 0.063-0.2 0.275-1.788 1.762-3.2 3.506-3.319 1.95-0.137 3.6 0.975 4.137 2.787 0.069 0.238 0.119 0.488 0.181 0.731v0.85c-0.019 0.056-0.050 0.106-0.056 0.169-0.269 1.65-1.456 2.906-3.081 3.262-0.125 0.025-0.25 0.063-0.375 0.094h-0.85c-0.056-0.019-0.113-0.050-0.169-0.056-1.625-0.262-2.862-1.419-3.237-3.025-0.037-0.156-0.081-0.3-0.119-0.444zM20.038 3.988l-0 0.85c-0.019 0.069-0.050 0.131-0.056 0.2-0.281 1.8-1.775 3.206-3.538 3.319-1.944 0.125-3.588-1-4.119-2.819-0.069-0.231-0.119-0.469-0.175-0.7v-0.85c0.019-0.056 0.050-0.106 0.063-0.162 0.3-1.625 1.244-2.688 2.819-3.194 0.206-0.069 0.425-0.106 0.637-0.162h0.85c0.056 0.019 0.113 0.050 0.169 0.056 1.631 0.269 2.863 1.419 3.238 3.025 0.038 0.15 0.075 0.294 0.113 0.437zM20.037 15.575v0.85c-0.019 0.069-0.050 0.131-0.063 0.2-0.281 1.794-1.831 3.238-3.581 3.313-1.969 0.087-3.637-1.1-4.106-2.931-0.050-0.194-0.094-0.387-0.137-0.581v-0.85c0.019-0.069 0.050-0.131 0.063-0.2 0.275-1.794 1.831-3.238 3.581-3.319 1.969-0.094 3.637 1.1 4.106 2.931 0.050 0.2 0.094 0.394 0.137 0.588z" fill="#000"></path>
                            </svg>
                        </button>
                        <nav class="content" hidden>
                            <button class="delete-comment-btn" <%= comment.canDelete ? '' : 'hidden' %>>
                                <div>
                                    <svg width="24px" height="24px" viewBox="0 0 32 32" xml:space="preserve"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <style type="text/css">
                                            .st0{fill:none;stroke:#152730;stroke-width:2;stroke-miterlimit:10;}
                                        </style>
                                        <rect class="st0" height="22" id="XMLID_14_" width="16" x="8" y="7"/>
                                        <line class="st0" id="XMLID_4_" x1="16" x2="16" y1="10" y2="26"/>
                                        <line class="st0" id="XMLID_118_" x1="20" x2="20" y1="10" y2="26"/>
                                        <line class="st0" id="XMLID_3_" x1="12" x2="12" y1="10" y2="26"/>
                                        <line class="st0" id="XMLID_5_" x1="5" x2="27" y1="7" y2="7"/>
                                        <rect class="st0" height="4" id="XMLID_6_" width="6" x="13" y="3"/>
                                        <g id="XMLID_386_"/>
                                    </svg>
                                </div>
                                <h1>Delete</h1>
                            </button>
                            <button class="complain-comment">
                                <div>
                                    <svg fill="#000000" width="24px" height="24px" viewBox="-2 0 19 19"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M 17,1.8640303 V 14.10472 a 1.6172688,1.8707597 0 0 1 -1.611451,1.864029 H 9.3179728 l -1.483466,2.750624 a 0.39704531,0.45927822 0 0 1 -0.7315523,0 L 5.6194886,15.968749 H -0.38709434 A 1.6172688,1.8707597 0 0 1 -2,14.10472 V 1.8640303 A 1.6172688,1.8707597 0 0 1 -0.38854871,0 H 15.388549 A 1.6172688,1.8707597 0 0 1 17,1.8640303 Z M 8.526791,12.048903 A 1.0267912,1.1877305 0 1 0 7.4999999,13.234951 1.0267912,1.1877305 0 0 0 8.526791,12.048903 Z M 6.6942742,8.970225 a 0.80572565,0.93201513 0 1 0 1.6114512,0 V 3.5278623 a 0.80572565,0.93201513 0 1 0 -1.6114512,0 z" />
                                    </svg>
                                </div>
                                <h1>Complain</h1>
                            </button>
                        </nav>
                    </div>
                </div>
                <div class="comment-text">
                    <%= comment.text %>
                </div>
                <div class="comment-bottom like-dislike-wrapper reaction-comment">
                    <button class="like" <%= userReactions[comment._id] === true ? 'selected' : '' %>>
                        <svg width="22px" height="22px" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.66003 10.1022L11.76 4.00221C12.16 3.40221 13.16 3.00221 13.96 3.30221C14.86 3.60221 15.46 4.60221 15.26 5.50221L14.76 8.70221C14.66 9.40221 15.16 9.90221 15.76 9.90221H19.76C21.26 9.90221 22.1801 11.0522 21.66 12.5022C21.14 13.9522 20.6801 16.5522 19.26 18.8022C18.6102 19.8318 17.8975 20.5522 16.6801 20.5522C12.6801 20.5522 6.66003 20.5522 6.66003 20.5522"
                                stroke="#000" stroke-width="1.5" stroke-miterlimit="10" />
                            <path
                                d="M2.18005 10.5522C2.18005 9.99996 2.62777 9.55225 3.18005 9.55225H6.68005C7.23234 9.55225 7.68005 9.99996 7.68005 10.5522V20.5522H3.18005C2.62777 20.5522 2.18005 20.1045 2.18005 19.5522V10.5522Z"
                                stroke="#000" stroke-width="1.5" />
                        </svg>
                    </button>
                    <h6 class="like-count">
                        <%= reactionCount[comment._id].likes %>
                    </h6>
                    <div class="v-line"></div>
                    <button class="dislike" <%= userReactions[comment._id] === false ? 'selected' : '' %>>
                        <svg width="22px" height="22px" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path id="vector"
                                d="M16.34 13.8978L12.24 19.9978C11.84 20.5978 10.84 20.9978 10.04 20.6978C9.14 20.3978 8.54 19.3978 8.74 18.4978L9.24 15.2978C9.34 14.5978 8.84 14.0978 8.24 14.0978H4.24C2.74 14.0978 1.8199 12.9478 2.34 11.4978C2.86 10.0478 3.3199 7.44784 4.74 5.19784C5.3898 4.16823 6.1025 3.44784 7.31986 3.44784C11.3199 3.44784 17.34 3.44784 17.34 3.44784"
                                stroke="#000000" stroke-width="1.5" stroke-miterlimit="10" />
                            <path id="rec"
                                d="M21.82 13.4478C21.82 14 21.3722 14.4478 20.82 14.4478H17.32C16.7677 14.4478 16.32 14 16.32 13.4478V3.44784H20.82C21.3722 3.44784 21.82 3.89555 21.82 4.44784V13.4478Z"
                                stroke="#000000" stroke-width="1.5" />
                        </svg>
                    </button>
                    <h6 class="dislike-count">
                        <%= reactionCount[comment._id].dislikes %>
                    </h6>
                    <button class="reply-btn">Reply</button>
                </div>
                <div class="add-comment-wrapper" hidden>
                    <textarea name="Add comment" class="input-comment-textarea textarea-autosize"
                        maxlength="2600"></textarea>
                    <div class="choice">
                        <button class="cancel-comment-btn">Cancel</button>
                        <button class="add-comment-btn">Comment</button>
                    </div>
                </div>
                <button class="show-answers-btn" <%= comment.hasReply ? '' : 'hidden' %>>Answers</button>
                <div class="answers-wrapper" hidden>
                    <div class="answers-container">

                    </div>
                    <button class="load-other-answers-btn">Other answers</button>
                </div>
            </div>
        </div>

    </div>
<% }); %>

<% function timeAgo(date_) {
    const date=new Date(date_);
    return formatDistanceToNow(date, { addSuffix: true, locale: uk });
} %>